{% extends "admin/base.html" %}
{% block title %}Messages{% endblock %}
{% block content %}
Filter by:
<button>+</button>
<form action="{% url admin.views.messages %}" method="get" accept-charset="utf-8">
  <div class='row-fluid show-grid' id='filter' style='display:none'>
    <div class='span6'>
      <label for="deposit">Deposit Credit</label>
      <input type="radio" name="action" id='deposit' value='deposit' {% if deposit %}checked='1'{% endif %} />
      <label for="new_acc">New Account</label>
      <input type="radio" name="action" id='new_acc' value='new_acc' {% if new_acc %}checked='1'{% endif %} />
      <label for="none">None</label>
      <input type="radio" name="action" id='none' value='none' {% if none %}checked='1'{% endif %} />
    </div>
    <div class='span6'>
      <label for="phone">Phone Number</label>
      <input type="text" id='phone' name="phone" value='{{ phone }}' />
      <label for="sender">Sender</label>
      <input type="text" id='sender' name="sender" value='{{ sender }}' />
    </div>
    <input type="submit" value="Filter" />
  </div>
</form>

<table class='message-table'>
  <thead>
    <tr>
      <th>Action</th>
      <th>Account</th>
      <th>Sender</th>
      <th>Text</th>
      <th>Datetime</th>
    </tr>
  </thead>
  <tbody>
    {% for message in page.object_list %}
    <tr>
      <td>{{ message.get_action_display }}</td>
      <td>{{ message.account.phone_number }}</td>
      <td>{{ message.sender }}</td>
      <td>{{ message.text }}</td>
      <td>{{ message.date_time }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% if paginator.num_pages > 1 %}
  {% include "admin/_paginator.html" %}
{% endif %}

{% endblock %}

{% block js-init %}
$('button').click(function(e){
  $('#filter').toggle(200, function(){
    $(e.target).html($(e.target).html() == '+' ?  '-' : '+');
  });
});
{% endblock %}

{# vim: set ts=2 sw=2 sts=2 fdn=4 : #}
